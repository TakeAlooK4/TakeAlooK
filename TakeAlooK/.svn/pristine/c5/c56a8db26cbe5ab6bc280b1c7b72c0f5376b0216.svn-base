<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>일반 유저 회원가입 페이지</title>
<script src="http://code.jquery.com/jquery-Latest.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<link rel="stylesheet" href="css/style.css" type="text/css">
<script type="text/javascript">
	
	// 이메일 정규식 체크
	 $(function(){
		$("#email_check").css("color", "red")
		$("#id").blur(function(){
			var email = $("#id").val();
			var emailRule = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
			var emailCheck = email.match(emailRule);
			
			if(!emailCheck) {
				$("#email_check").html("이메일 작성을 정확하게 입력해주세요.")
			} else {
				$("#email_check").html("");
			} 
			if(!email) {
				$("#email_check").html("");
			}
			
		});
	}); 
	
	// 이름 정규식 체크
	$(function(){
		$("#name_check").css("color", "red")
		$("#name").blur(function(){
			var name = $("#name").val();
			var nameRule = /^[가-힣]{2,5}$/;
			var nameCheck = name.match(nameRule);
			
			if(!nameCheck) {
				$("#name_check").html("본인 이름을 정확히 입력해주세요.")
			} else {
				$("#name_check").html("");
			} 
			if(!name) {
				$("#name_check").html("");
			}
			
		});
	});
	
	// 닉네임 정규식 체크
	$(function(){
		$("#nickname_check").css("color", "red")
		$("#nickname").blur(function(){
			var nickname = $("#nickname").val();
			var nicknameRule = /^[^0-9][^@#]+$/;
			var nicknameCheck = nickname.match(nicknameRule);
			
			if(!nicknameCheck) {
				$("#nickname_check").html("올바른 닉네임을 입력해주세요.")
			} else {
				$("#nickname_check").html("");
			} 
			if(!nickname) {
				$("#nickname_check").html("");
			}
			
		});
	});
	
	// 휴대폰번호 정규식 체크
	 $(function(){
		$("#contact_check").css("color", "red")
		$("#contact").blur(function(){
			var contact = $("#contact").val();
			var contactRule = /^010[.-]?(\d{4})[.-]?(\d{4})$/;
			var contactCheck = contact.match(contactRule);
			
			if(!contactCheck) {
				$("#contact_check").html("올바른 휴대폰 번호를 입력해주세요. 숫자, -를 포함한 숫자만 입력하세요.")
			} else {
				$("#contact_check").html("");
			} 
			if(!contact) {
				$("#contact_check").html("");
			}
			
		});
	});
	
	// 비밀번호 정규식 체크
	$(function() {
	$("#pw_check").css("color", "red")	
		$("#pw1").blur(function(){
			var pw = $("#pw1").val();
			var pwRule = /^(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9])(?=.*[0-9]).{8,15}$/;
			var pwCheck = pw.match(pwRule);
			
			if(!pwCheck) {
				$("#pw_check").html("영문+숫자+특수문자 조합 8~15이하까지 입력해주세요.");
			} else {
				$("#pw_check").html("");
			}
			if(!pw){
				$("#pw_check").html("");
			}
	
		});
	});

	// 닉네임 유효성 검사
	$(function(){
	$("#nickname2_check").css("color", "red")
	$("#nickname").blur(function(){
		var nickname = $('#nickname').val();
		$.ajax({
			url:"/nicknameCheck",
			data:{
				nickname:nickname
			},
			success:function(msg){
				$("#nickname2_check").html(msg);
				}
			});
		});
	});	
	
	// 아이디 유효성 검사 
	$(function(){
	$("#id_check").css("color", "red")
	$("#id").blur(function() {
		var id = $('#id').val();
		$.ajax({
			url:"/idCheck",
			data:{
				id:id
			},
			success:function(msg){
				$("#id_check").html(msg);
				}
			});
		});
	});

	// 휴대전화 유효성 검사 
	$(function(){
	$("#contact2_check").css("color", "red")
	$("#contact").blur(function() {
		var contact = $('#contact').val();
		$.ajax({
			url:"/contactCheck",
			data:{
				contact:contact
			},
			success:function(msg){
				$("#contact2_check").html(msg);
				}
			});
		});
	});
	
	// 회원가입 작성 미완료시 알림창
	$(function() {
		$("#signUpSuccess").click(function(){
			var id = $("#id").val();
			var password = $("#pw1").val();
			var password2 = $("#pw2").val();
			var name = $("#name").val();
			var nickname = $("#nickname").val();
			var contact = $("#contact").val();
			
			if(id == "" || password == "" || password2 == "" || name == "" || nickname == "" || contact == "") {
				alert("회원가입 작성란을 전부 작성해주세요.");
			} else {
				alert("회원가입이 완료되었습니다.")
				document.getElementById("memberSignUp").action="/memberSignUp.do";
				$("#memberSignUp").submit();
			}
		});
	});
	

	// 비밀번호 일치 불일치 검사
	$(function(){
		$("#alert-success").hide();
		$("#alert-danger").hide();
		$("#alert-success").css("color", "blue")
		$("#alert-danger").css("color", "red")
		$("input").keyup(function(){
			var pw1=$("#pw1").val();
			var pw2=$("#pw2").val();
			if(pw1 != "" || pw2 != ""){
				if(pw1 == pw2){
					$("#alert-success").show();
					$("#alert-danger").hide();
					
					$("#signUpSuccess").removeAttr("disabled");
				} else if(pw1 == "" || pw2 == ""){
					$("#alert-success").hide();
					$("#alert-danger").hide();
				}
				else{
					$("#alert-success").hide();
					$("#alert-danger").show();
					$("#signUpSuccess").attr("disabled", "disabled");
				}
			}
		});
	});
	
</script>
</head>
<body>
	
	<!-- bootstrap include header 적용코드 -->
	<th:block th:include="/header"></th:block>
	
	<!-- <header class="headerMenu">
		<div class="wrapper">
			<h1 class="pageName"><a href="/">Take A looK</a></h1>
				<ul class="menu">
					<li><a th:href="memberLogin">로그인 /</a></li>
					<li><a th:href="memberSignUp">회원가입 /</a></li>
					<li><a th:href="myPage">마이페이지 /</a></li>
					<li><a th:href="productCart">장바구니 /</a></li>
					<li><a th:href="orderList">구매내역</a></li>
				</ul>
		</div>
	</header> -->
	<h2 align="center">User SignUp</h2><br>
	<form method="post" id="memberSignUp">
		<div align="center">
			<input type="button" value="개인회원"> | <a href="companySignUp"><input type="button" value="기업회원"></a>
				<div>
					<br>
						<label for="id">아이디</label>
						<input type="email" id="id" name="id" placeholder="(이메일입력)" required>
						<div class="id_check_font" id="id_check"></div>
						<div class="email_check_font" id="email_check"></div>
					<br>
				</div>
				
				<label for="password">비밀번호</label>
				<input type="password" id="pw1" name="password" class="form-control" size="41" required/><br>
					<div class ="pw_check_font" id="pw_check"></div>
				
				<br><label for="password2">비밀번호 확인</label>
				<input type="password" id="pw2" name="password2" class="form-control" required/>
					<div class="alert alert-success" id="alert-success">비밀번호가 일치합니다.</div>
					<div class="alert alert-danger" id="alert-danger">비밀번호가 일치하지 않습니다.</div>
				<div>
				
				<br><label for="name">이름</label>
					<input type="text" id="name" name="name" placeholder="휴대폰 가입자명으로 정확하게 입력" size="32" required><br>
					<div class="name_check_font" id="name_check"></div>
				</div>
				
				<div>
				<br><label for="nickname">닉네임</label>
					<input type="text" id="nickname" name="nickname" size="9" required><br>
					<div class="nickname_check_font" id="nickname_check"></div>
					<div class="nickname2_check_font" id="nickname2_check"></div>
				</div>
				
				
				<div>
				<br><label for="contact">휴대폰 번호</label>
					<input type="text" id="contact" name="contact" required><br>
					<div class="contact_check_font" id="contact_check"></div>
					<div class="contact2_check_font" id="contact2_check"></div>
				</div>
				
				<div><br><input type="button" id="signUpSuccess" value="회원가입"></div>
		</div>
	</form>
	
</body>

</html>